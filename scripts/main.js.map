{"version":3,"file":"main.js","sources":["../_scripts/main.js"],"sourcesContent":["/* global $ */\n\n'use strict';\nwindow.$ = document.querySelectorAll.bind(document);\n\nNode.prototype.on = window.on = function (name, fn) {\n  this.addEventListener(name, fn.bind(this));\n};\n\nNodeList.prototype.__proto__ = Array.prototype;\n\nNodeList.prototype.on = NodeList.prototype.addEventListener = function (name, fn) {\n  this.forEach(function (elem) {\n    elem.on(name, fn);\n  });\n};\n\n(function () {\n\tfunction sendSWMessage(message) {\n\n\t\t// This wraps the message posting/response in a promise, which will resolve if the response doesn't\n\t\t// contain an error, and reject with the error if it does. If you'd prefer, it's possible to call\n\t\t// controller.postMessage() and set up the onmessage handler independently of a promise, but this is\n\t\t// a convenient wrapper.\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tconst messageChannel = new MessageChannel();\n\t\t\tmessageChannel.port1.onmessage = function(event) {\n\t\t\t\tif (event.data.error) {\n\t\t\t\t\treject(event.data.error);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(event.data);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// This sends the message data as well as transferring messageChannel.port2 to the service worker.\n\t\t\t// The service worker can then use the transferred port to reply via postMessage(), which\n\t\t\t// will in turn trigger the onmessage handler on messageChannel.port1.\n\t\t\t// See https://html.spec.whatwg.org/multipage/workers.html#dom-worker-postmessage\n\t\t\tnavigator.serviceWorker.controller.postMessage(message, [messageChannel.port2]);\n\t\t});\n\t}\n\n\tif ('serviceWorker' in navigator && location.protocol === 'https:') {\n\t\tnavigator.serviceWorker.register('/sw.js', { scope: '/' })\n\t\t.then(function(reg) {\n\t\t\tconsole.log('sw registered', reg);\n\t\t}).catch(function(error) {\n\t\t\tconsole.log('sw registration failed with ' + error);\n\t\t});\n\t}\n\n\t$('video')\n\t.forEach(function (video) {\n\t\tvideo.preload = 'none';\n\t\tvideo.autoplay = false;\n\t\tif (video.dataset.src) {\n\t\t\tvideo.src = video.dataset.src;\n\t\t}\n\t});\n\n\tfunction wrapHeader(node, i) {\n\t\tconst name = i + '-' + node.textContent.toLowerCase().trim().replace(/[^a-z]/g, '-').replace(/-+$/, '');\n\t\tconst a = document.createElement('a');\n\t\ta.name = name;\n\t\ta.id = name;\n\t\ta.href = '#' + name;\n\t\ta.style.color = \"inherit\";\n\t\ta.innerHTML = node.innerHTML;\n\t\tnode.innerHTML = '';\n\t\tnode.appendChild(a);\n\t}\n\n\t$('article h1,h2,h3,h4,h5,h6').forEach(wrapHeader);\n}());\n"],"names":[],"mappings":";;;AAGA,OAAO,CAAP,GAAW,SAAS,gBAAT,CAA0B,IAA1B,CAA+B,QAA/B,CAAX;;AAEA,KAAK,SAAL,CAAe,EAAf,GAAoB,OAAO,EAAP,GAAY,UAAU,IAAV,EAAgB,EAAhB,EAAoB;MAC7C,gBAAL,CAAsB,IAAtB,EAA4B,GAAG,IAAH,CAAQ,IAAR,CAA5B,EADkD;CAApB;;AAIhC,SAAS,SAAT,CAAmB,SAAnB,GAA+B,MAAM,SAAN;;AAE/B,SAAS,SAAT,CAAmB,EAAnB,GAAwB,SAAS,SAAT,CAAmB,gBAAnB,GAAsC,UAAU,IAAV,EAAgB,EAAhB,EAAoB;MAC3E,OAAL,CAAa,UAAU,IAAV,EAAgB;OACtB,EAAL,CAAQ,IAAR,EAAc,EAAd,EAD2B;EAAhB,CAAb,CADgF;CAApB;;AAM9D,CAAC,YAAY;UACH,aAAT,CAAuB,OAAvB,EAAgC;;;;;;SAMxB,IAAI,OAAJ,CAAY,UAAS,OAAT,EAAkB,MAAlB,EAA0B;OACtC,iBAAiB,IAAI,cAAJ,EAAjB,CADsC;kBAE7B,KAAf,CAAqB,SAArB,GAAiC,UAAS,KAAT,EAAgB;QAC5C,MAAM,IAAN,CAAW,KAAX,EAAkB;YACd,MAAM,IAAN,CAAW,KAAX,CAAP,CADqB;KAAtB,MAEO;aACE,MAAM,IAAN,CAAR,CADM;KAFP;IADgC;;;;;;YAYjC,CAAU,aAAV,CAAwB,UAAxB,CAAmC,WAAnC,CAA+C,OAA/C,EAAwD,CAAC,eAAe,KAAf,CAAzD,EAd4C;GAA1B,CAAnB,CAN+B;EAAhC;;KAwBI,mBAAmB,SAAnB,IAAgC,SAAS,QAAT,KAAsB,QAAtB,EAAgC;YACzD,aAAV,CAAwB,QAAxB,CAAiC,QAAjC,EAA2C,EAAE,OAAO,GAAP,EAA7C,EACC,IADD,CACM,UAAS,GAAT,EAAc;WACX,GAAR,CAAY,eAAZ,EAA6B,GAA7B,EADmB;GAAd,CADN,CAGG,KAHH,CAGS,UAAS,KAAT,EAAgB;WAChB,GAAR,CAAY,iCAAiC,KAAjC,CAAZ,CADwB;GAAhB,CAHT,CADmE;EAApE;;GASE,OAAF,EACC,OADD,CACS,UAAU,KAAV,EAAiB;QACnB,OAAN,GAAgB,MAAhB,CADyB;QAEnB,QAAN,GAAiB,KAAjB,CAFyB;MAGrB,MAAM,OAAN,CAAc,GAAd,EAAmB;SAChB,GAAN,GAAY,MAAM,OAAN,CAAc,GAAd,CADU;GAAvB;EAHQ,CADT,CAlCY;;UA2CH,UAAT,CAAoB,IAApB,EAA0B,CAA1B,EAA6B;MACtB,OAAO,IAAI,GAAJ,GAAU,KAAK,WAAL,CAAiB,WAAjB,GAA+B,IAA/B,GAAsC,OAAtC,CAA8C,SAA9C,EAAyD,GAAzD,EAA8D,OAA9D,CAAsE,KAAtE,EAA6E,EAA7E,CAAV,CADe;MAEtB,IAAI,SAAS,aAAT,CAAuB,GAAvB,CAAJ,CAFsB;IAG1B,IAAF,GAAS,IAAT,CAH4B;IAI1B,EAAF,GAAO,IAAP,CAJ4B;IAK1B,IAAF,GAAS,MAAM,IAAN,CALmB;IAM1B,KAAF,CAAQ,KAAR,GAAgB,SAAhB,CAN4B;IAO1B,SAAF,GAAc,KAAK,SAAL,CAPc;OAQvB,SAAL,GAAiB,EAAjB,CAR4B;OASvB,WAAL,CAAiB,CAAjB,EAT4B;EAA7B;;GAYE,2BAAF,EAA+B,OAA/B,CAAuC,UAAvC,EAvDY;CAAZ,GAAD;"}