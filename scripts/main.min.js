(function(){"use strict";var e=false;var n=n||self;n.$=document.querySelectorAll.bind(document);Node.prototype.on=n.on=function(e,n){this.addEventListener(e,n.bind(this))};NodeList.prototype.__proto__=Array.prototype;NodeList.prototype.on=NodeList.prototype.addEventListener=function(e,n){this.forEach(function(t){t.on(e,n)})};function t(e,t){if(!n.fetch){return location.assign(e)}fetch(e).then(function(e){return e.text()}).then(function(e){var n=(new DOMParser).parseFromString(e,"text/html");var o=n.querySelectorAll(t);var r=$(t).slice(0,o.length);r.forEach(function(e,n){e.parentNode.replaceChild(o[n],e)});return o}).catch(function(){location.assign(e)})}(function(){function e(e){return new Promise(function(n,t){var o=new MessageChannel;o.port1.onmessage=function(e){if(e.data.error){t(e.data.error)}else{n(e.data)}};navigator.serviceWorker.controller.postMessage(e,[o.port2])})}function o(n){var t="STORE_ALL";var o=t+"_"+Date.now();return e({action:t,urls:JSON.stringify(n),id:o})}function r(){var e=$("a").filter(function(e){return e.hostname===location.hostname&&e.protocol==="https"}).map(function(e){return e.toString()});return o(e).then(function(e){if(e.success){console.log("Successfully cached resources")}else{console.log("Some resourcecs failed to cache")}return e})}if("serviceWorker"in navigator&&location.protocol==="https:"){navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(function(e){console.log("sw registered",e)}).catch(function(e){console.log("sw registration failed with "+e)});n.addEventListener("message",function(e){if(e.data.action==="ASSET_REFRESHED"){if(e.data.url===location.toString()){console.log("Refreshing "+e.data.url);t(e.data.url,"body")}}});if(navigator.serviceWorker.controller){n.offlineLocalLinks=r;n.storeStaticResources=o;console.log("Offlining Available");$(".hero-offline")[0].style.display="inline";$(".hero-offline a").on("click",function(){this.innerHTML="Caching";(n.offlineLinks?o(n.offlineLinks):r()).then(function(e){this.innerHTML=e.success?"Cached":"Failed to Cache"}.bind(this))})}}$("video").forEach(function(e){e.preload="none";e.autoplay=false;e.src=e.dataset.src});function i(e,n){var t=n+"-"+e.textContent.toLowerCase().trim().replace(/[^a-z]/g,"-").replace(/-+$/,"");var o=document.createElement("a");o.name=t;o.id=t;o.href="#"+t;o.style.color="inherit";o.innerHTML=e.innerHTML;e.innerHTML="";e.appendChild(o)}$("article h1,h2,h3,h4,h5,h6").forEach(i)})()})();
//# sourceMappingURL=main.min.js.map